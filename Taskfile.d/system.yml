---
# https://taskfile.dev

version: '3'

vars:

tasks:

  generate-key:
    cmds:
      - mkdir -p .ssh
      - chmod 700 .ssh
      - ssh-keygen -q -N "" -m PEM -t rsa -b 4096 -f "{{.KEY}}" -C "{{.KEY}}"
      - echo "Key {{.KEY}} generated"
    status:
      - test -f "{{.KEY}}"
    preconditions:
      - sh: command -v ssh-keygen
        msg: "ssh-keygen is not installed"
    silent: true
